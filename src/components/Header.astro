---
import { SITE_TITLE } from "../consts";
import HeaderLink from "./HeaderLink.astro";
import SearchModal from "./SearchModal.astro";
---

<header
	class="sticky top-0 z-50 anime-header bg-white dark:bg-dark-primary transition-colors duration-300"
>
	<div class="container mx-auto px-2">
		<nav
			class="flex flex-wrap items-center py-3 px-2 relative justify-between"
		>
			<h1 class="text-xl font-bold anime-title">
				<a href="/" class="site-title-link">
					<img
						src="https://cdn.hakochest.net/avatar.jpg"
						alt="Logo"
						class="inline-block w-8 h-8 rounded-full mr-2"
					/>
					{SITE_TITLE}
				</a>
			</h1>

			<!-- 移动端菜单按钮 -->
			<button
				id="menu-toggle"
				class="md:hidden anime-menu-btn"
				aria-label="菜单"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke-width="1.5"
					stroke="currentColor"
					class="w-6 h-6"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
				</svg>
			</button>

			<!-- 导航链接 -->
			<div
				id="nav-links"
				class="hidden md:flex w-full md:w-auto flex-col md:flex-row items-center mt-4 md:mt-0 justify-center"
				style="width:100%"
			>
				<div class="internal-links flex flex-col md:flex-row">
					<HeaderLink href="/"> 首页 </HeaderLink>

					<!-- Post 下拉菜单 -->
					<div class="dropdown-container relative group">
						<HeaderLink href="/blog" class="dropdown-toggle">
							<span class="flex items-center">
								博客
								<svg
									xmlns="http://www.w3.org/2000/svg"
									viewBox="0 0 20 20"
									fill="currentColor"
									class="w-4 h-4 ml-1"
								>
									<path
										fill-rule="evenodd"
										d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
										clip-rule="evenodd"></path>
								</svg>
							</span>
						</HeaderLink>
						<div
							class="dropdown-menu absolute left-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50 hidden group-hover:block"
						>
							<a
								href="/blog/archive"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"
										></path>
									</svg>
									归档
								</span>
							</a>
							<a
								href="/blog"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
										></path>
									</svg>
									博客
								</span>
							</a>
							<a
								href="/blog/categories"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"
										></path>
									</svg>
									分类
								</span>
							</a>
							<a
								href="/blog/tags"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"
										></path>
									</svg>
									标签
								</span>
							</a>
							<a
								href="/blog/series"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
										></path>
									</svg>
									系列
								</span>
							</a>
						</div>
					</div>

					<!-- Zueg 下拉菜单 -->
					<div class="dropdown-container relative group">
						<HeaderLink href="/zueg" class="dropdown-toggle">
							<span class="flex items-center">
								随笔
								<svg
									xmlns="http://www.w3.org/2000/svg"
									viewBox="0 0 20 20"
									fill="currentColor"
									class="w-4 h-4 ml-1"
								>
									<path
										fill-rule="evenodd"
										d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
										clip-rule="evenodd"></path>
								</svg>
							</span>
						</HeaderLink>
						<div
							class="dropdown-menu absolute left-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50 hidden group-hover:block"
						>
							<a
								href="/zueg/software"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
										></path>
									</svg>
									软件
								</span>
							</a>
							<a
								href="/zueg/hardware"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"
										></path>
									</svg>
									硬件
								</span>
							</a>
							<a
								href="/zueg/website"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
										></path>
									</svg>
									网站
								</span>
							</a>
							<a
								href="/zueg/algorithm"
								class="block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700"
							>
								<span class="flex items-center">
									<svg
										xmlns="http://www.w3.org/2000/svg"
										class="h-4 w-4 mr-2"
										fill="none"
										viewBox="0 0 24 24"
										stroke="currentColor"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M4.871 4A17.926 17.926 0 003 12c0 2.874.673 5.59 1.871 8m14.13 0a17.926 17.926 0 001.87-8c0-2.874-.673-5.59-1.87-8M9 9h1.246a1 1 0 01.961.725l1.586 5.55a1 1 0 00.961.725H15m1-7h-.08a2 2 0 00-1.519.698L9.6 15.302A2 2 0 018.08 16H8"
										></path>
									</svg>
									算法
								</span>
							</a>
						</div>
					</div>

					<HeaderLink href="/friends"> 友链 </HeaderLink>
					<!-- <HeaderLink href="/anime-bg-demo"> 背景展示 </HeaderLink> -->
					<HeaderLink href="/about"> 关于 </HeaderLink>
				</div>

				<div
					class="social-links flex items-center absolute right-0 top-0 h-full"
				>
					<!-- 搜索按钮 -->
					<button
						id="search-toggle"
						class="social-icon kawaii-social-icon"
						aria-label="搜索"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-5 w-5"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
							></path>
						</svg>
					</button>

					<!-- 背景设置按钮 -->
					<button
						id="background-settings-btn"
						class="social-icon kawaii-social-icon"
						title="背景设置"
						aria-label="打开背景设置"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="w-6 h-6"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
							></path>
						</svg>
					</button>

					<!-- 暗/亮模式切换按钮 -->
					<button
						id="theme-toggle"
						class="social-icon kawaii-social-icon theme-toggle-btn"
						aria-label="切换暗/亮模式"
					>
						<!-- 月亮图标 (暗模式) -->
						<svg
							id="moon-icon"
							xmlns="http://www.w3.org/2000/svg"
							class="icon"
							width="20"
							height="20"
							viewBox="0 0 24 24"
							stroke-width="1.5"
							stroke="currentColor"
							fill="none"
							stroke-linecap="round"
							stroke-linejoin="round"
						>
							<path stroke="none" d="M0 0h24v24H0z" fill="none"
							></path>
							<path
								d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"
							></path>
						</svg>
						<!-- 太阳图标 (亮模式) -->
						<svg
							id="sun-icon"
							xmlns="http://www.w3.org/2000/svg"
							class="icon hidden"
							width="20"
							height="20"
							viewBox="0 0 24 24"
							stroke-width="1.5"
							stroke="currentColor"
							fill="none"
							stroke-linecap="round"
							stroke-linejoin="round"
						>
							<path stroke="none" d="M0 0h24v24H0z" fill="none"
							></path>
							<path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"
							></path>
							<path
								d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"
							></path>
						</svg>
					</button>

					<a
						href="https://github.com/Xlqmu"
						target="_blank"
						aria-label="GitHub"
						class="social-icon kawaii-social-icon"
					>
						<svg
							viewBox="0 0 16 16"
							aria-hidden="true"
							width="20"
							height="20"
							class="transition-colors"
						>
							<path
								fill="currentColor"
								d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
							></path>
						</svg>
					</a>

					<!-- Bilibili 图标 -->
					<a
						href="https://space.bilibili.com/"
						target="_blank"
						aria-label="Bilibili"
						class="social-icon kawaii-social-icon"
					>
						<svg
							class="icon"
							viewBox="0 0 1129 1024"
							version="1.1"
							xmlns="http://www.w3.org/2000/svg"
							p-id="9545"
							width="200"
							height="200"
							><path
								d="M234.909 9.656a80.468 80.468 0 0 1 68.398 0 167.374 167.374 0 0 1 41.843 30.578l160.937 140.82h115.07l160.936-140.82a168.983 168.983 0 0 1 41.843-30.578A80.468 80.468 0 0 1 930.96 76.445a80.468 80.468 0 0 1-17.703 53.914 449.818 449.818 0 0 1-35.406 32.187 232.553 232.553 0 0 1-22.531 18.508h100.585a170.593 170.593 0 0 1 118.289 53.109 171.397 171.397 0 0 1 53.914 118.288v462.693a325.897 325.897 0 0 1-4.024 70.007 178.64 178.64 0 0 1-80.468 112.656 173.007 173.007 0 0 1-92.539 25.75h-738.7a341.186 341.186 0 0 1-72.421-4.024A177.835 177.835 0 0 1 28.91 939.065a172.202 172.202 0 0 1-27.36-92.539V388.662a360.498 360.498 0 0 1 0-66.789A177.03 177.03 0 0 1 162.487 178.64h105.414c-16.899-12.07-31.383-26.555-46.672-39.43a80.468 80.468 0 0 1-25.75-65.984 80.468 80.468 0 0 1 39.43-63.57M216.4 321.873a80.468 80.468 0 0 0-63.57 57.937 108.632 108.632 0 0 0 0 30.578v380.615a80.468 80.468 0 0 0 55.523 80.469 106.218 106.218 0 0 0 34.601 5.632h654.208a80.468 80.468 0 0 0 76.444-47.476 112.656 112.656 0 0 0 8.047-53.109v-354.06a135.187 135.187 0 0 0 0-38.625 80.468 80.468 0 0 0-52.304-54.719 129.554 129.554 0 0 0-49.89-7.242H254.22a268.764 268.764 0 0 0-37.82 0z m0 0"
								fill="#20B0E3"
								p-id="9546"></path><path
								d="M348.369 447.404a80.468 80.468 0 0 1 55.523 18.507 80.468 80.468 0 0 1 28.164 59.547v80.468a80.468 80.468 0 0 1-16.094 51.5 80.468 80.468 0 0 1-131.968-9.656 104.609 104.609 0 0 1-10.46-54.719v-80.468a80.468 80.468 0 0 1 70.007-67.593z m416.02 0a80.468 80.468 0 0 1 86.102 75.64v80.468a94.148 94.148 0 0 1-12.07 53.11 80.468 80.468 0 0 1-132.773 0 95.757 95.757 0 0 1-12.875-57.133V519.02a80.468 80.468 0 0 1 70.007-70.812z m0 0"
								fill="#20B0E3"
								p-id="9547"></path></svg
						>
					</a>

					<a
						href="https://music.163.com/#/user/home?id=1700655356"
						target="_blank"
						aria-label="网易云音乐"
						class="social-icon kawaii-social-icon"
					>
						<svg
							class="icon"
							viewBox="0 0 1024 1024"
							version="1.1"
							xmlns="http://www.w3.org/2000/svg"
							p-id="18414"
							width="200"
							height="200"
							><path
								d="M603.97 105.21c22.1-6.37 45.78-6.05 68.1-0.92 25.63 6.09 49.88 17.86 70.75 33.9 7.62 5.79 14.5 12.99 18 22.05 5.42 13.4 3.97 29.42-4.03 41.49-6.98 10.84-18.85 18.39-31.64 20.01-10.22 1.4-20.93-0.77-29.71-6.2-4.95-2.91-8.72-7.4-13.69-10.28-13.33-8.46-28.68-15.12-44.73-14.74-11.3 0.13-21.24 6.75-28.9 14.53-7.17 7.4-10.82 18.31-8.45 28.46 5.51 20.74 10.99 41.48 16.49 62.22 39.54 2.03 79.06 12.49 113.05 33.13 33.04 20.44 62.89 46.36 86.56 77.25 20.09 26.18 35.32 56.08 44.64 87.74 10.09 34.12 13.36 70.1 10.73 105.54-2.19 29.24-7.94 58.31-17.86 85.94-25.65 67.28-73.16 126.27-134.31 164.5-44.85 28.33-96.36 45.42-148.89 51.94-36.26 4.53-73.21 4.55-109.29-1.63-74.14-12.25-143.62-49.2-196.35-102.57-52.4-52.5-88.87-120.64-103.62-193.33-10.88-53.01-10.39-108.36 1.68-161.13 14.75-65.07 47.35-125.94 93.18-174.41 37.38-39.8 83.55-71.29 134.23-91.62 5.22-1.99 10.36-4.35 15.92-5.23 11.87-2.08 24.55 0.73 34.27 7.89 13.16 9.29 20.4 26.14 18.21 42.08-1.81 16.27-13.36 30.94-28.75 36.51-51.2 19.14-96.6 53.34-129.28 97.13-29.21 38.86-48.27 85.28-54.66 133.49-6.45 47.72-0.71 97 16.39 142 24.7 65.79 73.81 122.4 136.42 154.62 37.7 19.53 80.14 29.73 122.59 29.44 34.92-0.45 69.95-6.06 102.77-18.2 28.86-10.72 55.91-26.55 78.91-47.07 21.44-19 39.28-41.96 52.89-67.15 6.82-12.85 13.12-26.08 16.97-40.15 11.36-40.22 13.33-83.81 1.18-124.09-10.05-33.78-30.73-63.89-57.14-87.02-11.68-10.22-24.16-19.59-37.54-27.47-11.82-6.64-24.73-11.16-37.9-14.25 9.18 35.9 19 71.65 28.31 107.52 1.58 8.6 3.16 17.2 4.64 25.82 1.36 37.01-11.62 74.29-35.49 102.6-22.24 26.68-53.82 45.45-87.98 51.9-36.82 7.34-76.41 0.41-108.03-20-30.19-19.14-52.49-49.45-64.25-83-6.66-18.77-9.98-38.62-10.64-58.5-2.02-43.25 9.29-87.44 34.03-123.21 29.07-42.69 74.9-72.04 124.04-86.36-3.62-13.84-7.32-27.66-10.98-41.5-9.49-29.87-7.47-63.41 6.69-91.49 7.64-15.67 19-29.32 32.14-40.67 14.63-12.51 31.71-22.39 50.33-27.51M486.64 430.56c-13.18 13.84-22.42 31.34-26.4 50.02-3.58 16.96-3.6 34.64-0.38 51.65 3.93 18.79 13.63 37.17 29.71 48.26 12.48 8.86 28.73 11.55 43.62 8.64 27.55-4.84 50.03-30.19 50.8-58.24-1.05-6.95-2.2-13.9-4.16-20.66-10.29-38.92-20.67-77.81-30.9-116.75-23.28 7.18-45.44 19.28-62.29 37.08z"
								fill="#d81e06"
								p-id="18415"></path></svg
						>
					</a>
				</div>
			</div>
		</nav>
	</div>
</header>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const menuToggle = document.getElementById("menu-toggle");
		const navLinks = document.getElementById("nav-links");

		menuToggle?.addEventListener("click", () => {
			navLinks?.classList.toggle("hidden");
		});

		// 背景设置按钮功能
		const backgroundSettingsBtn = document.getElementById(
			"background-settings-btn",
		);

		if (backgroundSettingsBtn) {
			backgroundSettingsBtn.addEventListener("click", function () {
				// 发送打开背景设置模态框事件
				window.dispatchEvent(new CustomEvent("openBackgroundModal"));
			});
		}
	});
</script>

<style>
	.anime-header {
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
		background-color: #2a314b;
		position: relative;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	}

	.anime-title {
		position: relative;
	}

	.site-title-link {
		text-decoration: none;
		color: #fff;
		position: relative;
		display: inline-flex;
		align-items: center;
		transition: all 0.3s ease;
	}

	.site-title-link:hover {
		color: #3b82f6;
	}

	.internal-links {
		display: flex;
		gap: 0.5rem;
	}

	.internal-links a {
		display: flex;
		align-items: center;
		padding: 0.5rem 1rem;
		text-decoration: none;
		color: rgba(255, 255, 255, 0.7);
		font-weight: 500;
		transition: all 0.2s ease;
	}

	.internal-links a:hover {
		color: #3b82f6;
	}

	.anime-menu-btn {
		color: #fff;
		border-radius: 4px;
		padding: 0.5rem;
		transition: all 0.3s ease;
	}

	.anime-menu-btn:hover {
		color: #3b82f6;
	}

	.kawaii-social-icon {
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 0.5rem;
		color: rgba(255, 255, 255, 0.7);
		transition: all 0.3s ease;
		border-radius: 50%;
		width: 32px;
		height: 32px;
		background-color: rgba(255, 255, 255, 0.1);
	}

	.kawaii-social-icon:hover {
		color: #3b82f6;
		background-color: rgba(255, 255, 255, 0.15);
	}

	/* 背景切换按钮样式 */
	/* 移动端适配 */
	@media (max-width: 768px) {
		.social-links {
			flex-wrap: wrap;
		}
	}
	.internal-links a.active {
		color: var(--accent);
		font-weight: 600;
	}

	.social-icon {
		padding: 0.5rem;
	}

	@media (min-width: 768px) {
		.internal-links a {
			margin: 0 0.2rem;
		}
	}

	/* 主题切换按钮样式 */
	.theme-toggle-btn {
		cursor: pointer;
		display: flex;
		align-items: center;
		justify-content: center;
		margin-right: 0.75rem;
		transition: transform 0.2s;
	}

	.theme-toggle-btn:hover {
		transform: rotate(12deg);
	}

	.theme-toggle-btn .icon {
		transition: opacity 0.3s;
	}

	.theme-toggle-btn .hidden {
		display: none;
	}

	/* 下拉菜单样式 */
	.dropdown-container {
		position: relative;
	}

	.dropdown-menu {
		visibility: hidden;
		opacity: 0;
		transform: translateY(-10px);
		transition:
			opacity 0.2s ease,
			transform 0.2s ease,
			visibility 0.2s;
	}

	.dropdown-container:hover .dropdown-menu {
		visibility: visible;
		opacity: 1;
		transform: translateY(0);
	}
</style>

<script>
	// 检查本地存储中的主题首选项或系统首选项
	function getInitialTheme(): "dark" | "light" {
		const savedTheme = localStorage.getItem("theme");
		if (savedTheme === "dark" || savedTheme === "light") {
			return savedTheme;
		}
		// 检查系统偏好
		return window.matchMedia("(prefers-color-scheme: dark)").matches
			? "dark"
			: "light";
	}

	// 设置主题
	function setTheme(theme: "dark" | "light"): void {
		const moonIcon = document.getElementById("moon-icon");
		const sunIcon = document.getElementById("sun-icon");

		if (!moonIcon || !sunIcon) return;

		if (theme === "dark") {
			document.documentElement.classList.add("dark");
			localStorage.setItem("theme", "dark");
			moonIcon.classList.add("hidden");
			sunIcon.classList.remove("hidden");
		} else {
			document.documentElement.classList.remove("dark");
			localStorage.setItem("theme", "light");
			moonIcon.classList.remove("hidden");
			sunIcon.classList.add("hidden");
		}
	}

	// 初始化
	document.addEventListener("DOMContentLoaded", () => {
		const themeToggle = document.getElementById("theme-toggle");

		if (!themeToggle) return;

		// 设置初始主题
		setTheme(getInitialTheme());

		// 切换主题
		themeToggle.addEventListener("click", () => {
			const isDark = document.documentElement.classList.contains("dark");
			setTheme(isDark ? "light" : "dark");
		});
	});
</script>

<SearchModal />
